@model Arma3Event.Entities.GameMap

@{
    ViewData["Title"] = Model.Name;
}

@section NavBar  {
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-action="Index">Maps</a></li>
            <li class="breadcrumb-item active" aria-current="page">@ViewData["Title"]</li>
        </ol>
    </nav>
}

@section Title { <h1><span>@ViewData["Title"]</span></h1> }

<div>
    <dl class="row">
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Name)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Name)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Image)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Image)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.WorkshopLink)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.WorkshopLink)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.WebMap)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.WebMap)
        </dd>
    </dl>
</div>
<div>
    <a class="btn btn-sm btn-secondary" asp-action="Edit" asp-route-id="@Model.GameMapID">Modifier</a>
</div>
@if (!string.IsNullOrEmpty(Model.WebMap))
{
    <div class="btn-toolbar mt-5 mb-2 justify-content-between">
        <div>Les fonctions de dessins ne sont disponibles qu'au sein d'un événement.</div>
        <div class="input-group" style="width:90px;">
            <input type="text" class="form-control form-control-sm text-center" id="coordinates" readonly="readonly" />
        </div>
    </div>
    <div class="map" id="map" style="width:100%; height:80vh; margin:0;padding:0;border:0;">
    </div>
}

@section Styles {
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin="" />
}

@section Scripts {
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js" integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew==" crossorigin="">
    </script>
    <script src="https://jetelain.github.io/Arma3Map/js/mapUtils.js">
    </script>
    <script src="~/js/mapPreview.js" asp-append-version="true">
    </script>
    @if (!string.IsNullOrEmpty(Model.WebMap))
    {
        <script src="https://jetelain.github.io/Arma3Map/maps/@(Model.WebMap).js">
        </script>
        <script>
        var mapInfos = Arma3Map.Maps.@(Model.WebMap);
        mapInfos.tilePattern = 'https://jetelain.github.io/Arma3Map' + mapInfos.tilePattern;
        InitMap(mapInfos);
        </script>
    }
}
